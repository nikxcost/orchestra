# üì± –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ —Å –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –Ω–æ—É—Ç–±—É–∫–µ, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ. –û—à–∏–±–∫–∞: "Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω".

## –ü—Ä–∏—á–∏–Ω–∞

Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `localhost:8000` –∫–∞–∫ API URL, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ backend –∑–∞–ø—É—â–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Ç–æ–º –∂–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ `localhost` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–∞–º —Ç–µ–ª–µ—Ñ–æ–Ω, –∞ –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

## –†–µ—à–µ–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)

‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º production API URL:
```env
VITE_API_BASE_URL=http://109.69.22.56/api
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å)

**1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
```bash
ssh root@109.69.22.56
```

**2. –û–±–Ω–æ–≤–∏—Ç–µ backend `.env` —Ñ–∞–π–ª —Å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:**
```bash
cd /root/orchestra
nano backend/.env
```

**–î–æ–±–∞–≤—å—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `ALLOWED_ORIGINS`:**
```env
OPENROUTER_API_KEY=–≤–∞—à_—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π_–∫–ª—é—á
MODEL_NAME=openai/gpt-4o
API_KEY=–≤–∞—à_api_–∫–ª—é—á_–µ—Å–ª–∏_–µ—Å—Ç—å
ALLOWED_ORIGINS=http://109.69.22.56,http://localhost:5173,http://localhost:3000
```

**3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç:**
```bash
cd /root/orchestra
git pull origin main
./deploy.sh
```

**4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ backend
sudo systemctl status orchestra

# –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω
sudo systemctl start orchestra

# –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx
sudo systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo journalctl -u orchestra -n 50
```

**5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API:**
```bash
# Health check
curl http://localhost:8000/health
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: {"status":"healthy"}

# –ß–µ—Ä–µ–∑ nginx
curl http://109.69.22.56/api/health
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: {"status":"healthy"}
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞:

1. **Health check:** `http://109.69.22.56/api/health`
   - –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: `{"status":"healthy"}`

2. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** `http://109.69.22.56`
   - –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
sudo journalctl -u orchestra -f

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd /root/orchestra
source venv/bin/activate
cd backend
pip install langchain-openai langchain-core langgraph
```

### CORS –æ—à–∏–±–∫–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `backend/.env`:
```bash
cat /root/orchestra/backend/.env
```

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `ALLOWED_ORIGINS` –≤–∫–ª—é—á–∞–µ—Ç IP —Å–µ—Ä–≤–µ—Ä–∞:
```env
ALLOWED_ORIGINS=http://109.69.22.56,http://localhost:5173
```

### Nginx –ø—Ä–æ–±–ª–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
sudo tail -f /var/log/nginx/orchestra_error.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart nginx
```

## –î–ª—è production (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω** –≤–º–µ—Å—Ç–æ IP –∞–¥—Ä–µ—Å–∞
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** (HTTPS)
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API_KEY** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–°–º. [DEPLOYMENT.md](../DEPLOYMENT.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.
